## CloudFormation - Deletion Policies
These policies allow you on how the resources will behave when the template is deleted
Below are the deletion policies in CloudFormation

### a. DeletionPolicy: Delete
This is the default policy which will delete the resources when the template is deleted
Exception is for S3, if the bucket is not empty, then S3 will not get deleted
In this case, you can manually empty S3 or create a custom resource to empty S3 bucket
```yaml
Resources:
  MyInstance:
    Type: AWS::EC2::Instance
    DeletionPolicy: Delete
    Properties:
     <code>
```

### b. DeletionPolicy: Retain
This will help you retain the specific resource from deletion when you delete the template
Example: Let's say I do not want to delete DynamoDB from deletion
```yaml
Resources:
  MyDBInstance:
    Type: AWS::RDS::DBInstance
    DeletionPolicy: Snapshot
    Properties:
      <code>
```

### c. DeletionPolicy: Snapshot
This will create a snapshot of the resource before deletion
It is only supported for few resources
EBS, ElastiCache cluster & replication group, RDS, RDS Cluster, Redshift Cluster, Neptune Cluster & DocumentDB Cluster
Useful for backup & safety purposes
```yaml
Resources:
  MyDBInstance:
    Type: AWS::RDS::DBInstance
    DeletionPolicy: Snapshot
    Properties:
      <code>
```

* Note: If you want to delete resources under 'Retain' & 'Snapshot', then the same needs to be deleted manually
* Hands-on
- Try this hands-on to test 'Retain' & 'Snapshot'
- https://github.com/pandacloud1/aws-devops-pro/blob/main/cloudformation-code/from-developer-course/4-deletionpolicy.yaml
